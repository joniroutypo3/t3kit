!function(){"use strict";const t=t=>{let e=t.getAttribute("data-target");if(!e||"#"===e){const i=t.getAttribute("href");e=i&&"#"!==i?i.trim():null}return e},e=e=>{const i=t(e);return i&&document.querySelector(i)?i:null},i=e=>{const i=t(e);return i?document.querySelector(i):null},o=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const o=parseFloat(e),s=parseFloat(i);return o||s?(e=e.split(",")[0],i=i.split(",")[0],1e3*(parseFloat(e)+parseFloat(i))):0},s=t=>(t[0]||t).nodeType,n=(t,e)=>{let i=!1;const o=e+5;t.addEventListener("transitionend",(function e(){i=!0,t.removeEventListener("transitionend",e)})),setTimeout(()=>{i||(t=>{t.dispatchEvent(new Event("transitionend"))})(t)},o)},a=(t,e,i)=>{Object.keys(i).forEach(o=>{const n=i[o],a=e[o],r=a&&s(a)?"element":null==(l=a)?""+l:{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase();var l;if(!new RegExp(n).test(r))throw new Error(t.toUpperCase()+": "+`Option "${o}" provided type "${r}" `+`but expected type "${n}".`)})},r=t=>{if(!t)return!1;if(t.style&&t.parentNode&&t.parentNode.style){const e=getComputedStyle(t),i=getComputedStyle(t.parentNode);return"none"!==e.display&&"none"!==i.display&&"hidden"!==e.visibility}return!1},l=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-no-jquery")?t:null},d=(()=>{const t={};let e=1;return{set(i,o,s){void 0===i.key&&(i.key={key:o,id:e},e++),t[i.key.id]=s},get(e,i){if(!e||void 0===e.key)return null;const o=e.key;return o.key===i?t[o.id]:null},delete(e,i){if(void 0===e.key)return;const o=e.key;o.key===i&&(delete t[o.id],delete e.key)}}})(),h={setData(t,e,i){d.set(t,e,i)},getData:(t,e)=>d.get(t,e),removeData(t,e){d.delete(t,e)}};let c=Element.prototype.querySelectorAll,m=Element.prototype.querySelector;const p=(()=>{const t=new CustomEvent("Bootstrap",{cancelable:!0}),e=document.createElement("div");return e.addEventListener("Bootstrap",()=>null),t.preventDefault(),e.dispatchEvent(t),t.defaultPrevented})(),f=/:scope\b/;(()=>{const t=document.createElement("div");try{t.querySelectorAll(":scope *")}catch(t){return!1}return!0})()||(c=function(t){if(!f.test(t))return this.querySelectorAll(t);const e=Boolean(this.id);e||(this.id=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})("scope"));let i=null;try{t=t.replace(f,"#"+this.id),i=this.querySelectorAll(t)}finally{e||this.removeAttribute("id")}return i},m=function(t){if(!f.test(t))return this.querySelector(t);const e=c.call(this,t);return void 0!==e[0]?e[0]:null});const u=l(),g=/[^.]*(?=\..*)\.|.*/,C=/\..*/,y=/::\d+$/,v={};let w=1;const b={mouseenter:"mouseover",mouseleave:"mouseout"},N=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function O(t,e){return e&&`${e}::${w++}`||t.uidEvent||w++}function E(t){const e=O(t);return t.uidEvent=e,v[e]=v[e]||{},v[e]}function I(t,e,i=null){const o=Object.keys(t);for(let s=0,n=o.length;s<n;s++){const n=t[o[s]];if(n.originalHandler===e&&n.delegationSelector===i)return n}return null}function S(t,e,i){const o="string"==typeof e,s=o?i:e;let n=t.replace(C,"");const a=b[n];a&&(n=a);return N.indexOf(n)>-1||(n=t),[o,s,n]}function x(t,e,i,o,s){if("string"!=typeof e||!t)return;i||(i=o,o=null);const[n,a,r]=S(e,i,o),l=E(t),d=l[r]||(l[r]={}),h=I(d,a,n?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const c=O(a,e.replace(g,"")),m=n?function(t,e,i){return function o(s){const n=t.querySelectorAll(e);for(let{target:e}=s;e&&e!==this;e=e.parentNode)for(let a=n.length;a--;)if(n[a]===e)return o.oneOff&&_.off(t,s.type,i),i.apply(e,[s]);return null}}(t,i,o):function(t,e){return function i(o){return i.oneOff&&_.off(t,o.type,e),e.apply(t,[o])}}(t,i);m.delegationSelector=n?i:null,m.originalHandler=a,m.oneOff=s,m.uidEvent=c,d[c]=m,t.addEventListener(r,m,n)}function L(t,e,i,o,s){const n=I(e[i],o,s);n&&(t.removeEventListener(i,n,Boolean(s)),delete e[i][n.uidEvent])}const _={on(t,e,i,o){x(t,e,i,o,!1)},one(t,e,i,o){x(t,e,i,o,!0)},off(t,e,i,o){if("string"!=typeof e||!t)return;const[s,n,a]=S(e,i,o),r=a!==e,l=E(t),d="."===e.charAt(0);if(void 0!==n){if(!l||!l[a])return;return void L(t,l,a,n,s?i:null)}d&&Object.keys(l).forEach(i=>{!function(t,e,i,o){const s=e[i]||{};Object.keys(s).forEach(n=>{if(n.indexOf(o)>-1){const o=s[n];L(t,e,i,o.originalHandler,o.delegationSelector)}})}(t,l,i,e.slice(1))});const h=l[a]||{};Object.keys(h).forEach(i=>{const o=i.replace(y,"");if(!r||e.indexOf(o)>-1){const e=h[i];L(t,l,a,e.originalHandler,e.delegationSelector)}})},trigger(t,e,i){if("string"!=typeof e||!t)return null;const o=e.replace(C,""),s=e!==o,n=N.indexOf(o)>-1;let a,r=!0,l=!0,d=!1,h=null;return s&&u&&(a=u.Event(e,i),u(t).trigger(a),r=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),d=a.isDefaultPrevented()),n?(h=document.createEvent("HTMLEvents"),h.initEvent(o,r,!0)):h=new CustomEvent(e,{bubbles:r,cancelable:!0}),void 0!==i&&Object.keys(i).forEach(t=>{Object.defineProperty(h,t,{get:()=>i[t]})}),d&&(h.preventDefault(),p||Object.defineProperty(h,"defaultPrevented",{get:()=>!0})),l&&t.dispatchEvent(h),h.defaultPrevented&&void 0!==a&&a.preventDefault(),h}};function D(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function Y(t){return t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase())}const A={setDataAttribute(t,e,i){t.setAttribute("data-"+Y(e),i)},removeDataAttribute(t,e){t.removeAttribute("data-"+Y(e))},getDataAttributes(t){if(!t)return{};const e={...t.dataset};return Object.keys(e).forEach(t=>{e[t]=D(e[t])}),e},getDataAttribute:(t,e)=>D(t.getAttribute("data-"+Y(e))),offset(t){const e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:t=>({top:t.offsetTop,left:t.offsetLeft}),toggleClass(t,e){t&&(t.classList.contains(e)?t.classList.remove(e):t.classList.add(e))}},P={matches:(t,e)=>t.matches(e),find:(t,e=document.documentElement)=>[].concat(...c.call(e,t)),findOne:(t,e=document.documentElement)=>m.call(e,t),children:(t,e)=>[].concat(...t.children).filter(t=>t.matches(e)),parents(t,e){const i=[];let o=t.parentNode;for(;o&&o.nodeType===Node.ELEMENT_NODE&&3!==o.nodeType;)this.matches(o,e)&&i.push(o),o=o.parentNode;return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(this.matches(i,e))return[i];i=i.nextElementSibling}return[]}},T="collapse",X="bs.collapse",k={toggle:!0,parent:""},H={toggle:"boolean",parent:"(string|element)"};class M{constructor(t,i){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(i),this._triggerArray=P.find(`[data-toggle="collapse"][href="#${t.id}"],[data-toggle="collapse"][data-target="#${t.id}"]`);const o=P.find('[data-toggle="collapse"]');for(let i=0,s=o.length;i<s;i++){const s=o[i],n=e(s),a=P.find(n).filter(e=>e===t);null!==n&&a.length&&(this._selector=n,this._triggerArray.push(s))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle(),h.setData(t,X,this)}static get VERSION(){return"5.0.0-alpha1"}static get Default(){return k}toggle(){this._element.classList.contains("show")?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains("show"))return;let t,e;this._parent&&(t=P.find(".show, .collapsing",this._parent).filter(t=>"string"==typeof this._config.parent?t.getAttribute("data-parent")===this._config.parent:t.classList.contains("collapse")),0===t.length&&(t=null));const i=P.findOne(this._selector);if(t){const o=t.filter(t=>i!==t);if(e=o[0]?h.getData(o[0],X):null,e&&e._isTransitioning)return}if(_.trigger(this._element,"show.bs.collapse").defaultPrevented)return;t&&t.forEach(t=>{i!==t&&M.collapseInterface(t,"hide"),e||h.setData(t,X,null)});const s=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[s]=0,this._triggerArray.length&&this._triggerArray.forEach(t=>{t.classList.remove("collapsed"),t.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);const a="scroll"+(s[0].toUpperCase()+s.slice(1)),r=o(this._element);_.one(this._element,"transitionend",()=>{this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[s]="",this.setTransitioning(!1),_.trigger(this._element,"shown.bs.collapse")}),n(this._element,r),this._element.style[s]=this._element[a]+"px"}hide(){if(this._isTransitioning||!this._element.classList.contains("show"))return;if(_.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=this._element.getBoundingClientRect()[t]+"px",this._element.offsetHeight,this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");const e=this._triggerArray.length;if(e>0)for(let t=0;t<e;t++){const e=this._triggerArray[t],o=i(e);o&&!o.classList.contains("show")&&(e.classList.add("collapsed"),e.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[t]="";const s=o(this._element);_.one(this._element,"transitionend",()=>{this.setTransitioning(!1),this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),_.trigger(this._element,"hidden.bs.collapse")}),n(this._element,s)}setTransitioning(t){this._isTransitioning=t}dispose(){h.removeData(this._element,X),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(t){return(t={...k,...t}).toggle=Boolean(t.toggle),a(T,t,H),t}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){let{parent:t}=this._config;s(t)?void 0===t.jquery&&void 0===t[0]||(t=t[0]):t=P.findOne(t);const e=`[data-toggle="collapse"][data-parent="${t}"]`;return P.find(e,t).forEach(t=>{const e=i(t);this._addAriaAndCollapsedClass(e,[t])}),t}_addAriaAndCollapsedClass(t,e){if(t){const i=t.classList.contains("show");e.length&&e.forEach(t=>{i?t.classList.remove("collapsed"):t.classList.add("collapsed"),t.setAttribute("aria-expanded",i)})}}static collapseInterface(t,e){let i=h.getData(t,X);const o={...k,...A.getDataAttributes(t),..."object"==typeof e&&e?e:{}};if(!i&&o.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(o.toggle=!1),i||(i=new M(t,o)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each((function(){M.collapseInterface(this,t)}))}static getInstance(t){return h.getData(t,X)}}_.on(document,"click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(t){"A"===t.target.tagName&&t.preventDefault();const i=A.getDataAttributes(this),o=e(this);P.find(o).forEach(t=>{const e=h.getData(t,X);let o;e?(null===e._parent&&"string"==typeof i.parent&&(e._config.parent=i.parent,e._parent=e._getParent()),o="toggle"):o=i,M.collapseInterface(t,o)})}));const W=l();if(W){const t=W.fn[T];W.fn[T]=M.jQueryInterface,W.fn[T].Constructor=M,W.fn[T].noConflict=()=>(W.fn[T]=t,M.jQueryInterface)}const R=new RegExp("ArrowUp|ArrowDown|Escape"),q={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},z={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"};class F{constructor(t,e){this._element=t,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners(),h.setData(t,"bs.dropdown",this)}static get VERSION(){return"5.0.0-alpha1"}static get Default(){return q}static get DefaultType(){return z}toggle(){if(this._element.disabled||this._element.classList.contains("disabled"))return;const t=this._element.classList.contains("show");F.clearMenus(),t||this.show()}show(){if(this._element.disabled||this._element.classList.contains("disabled")||this._menu.classList.contains("show"))return;const t=F.getParentFromElement(this._element),e={relatedTarget:this._element};_.trigger(this._element,"show.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(t=>_.on(t,"mouseover",null,(function(){}))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),A.toggleClass(this._menu,"show"),A.toggleClass(this._element,"show"),_.trigger(t,"shown.bs.dropdown",e))}hide(){if(this._element.disabled||this._element.classList.contains("disabled")||!this._menu.classList.contains("show"))return;const t=F.getParentFromElement(this._element),e={relatedTarget:this._element};_.trigger(t,"hide.bs.dropdown",e).defaultPrevented||(A.toggleClass(this._menu,"show"),A.toggleClass(this._element,"show"),_.trigger(t,"hidden.bs.dropdown",e))}dispose(){h.removeData(this._element,"bs.dropdown"),_.off(this._element,".bs.dropdown"),this._element=null,this._menu=null}update(){this._inNavbar=this._detectNavbar()}_addEventListeners(){_.on(this._element,"click.bs.dropdown",t=>{t.preventDefault(),t.stopPropagation(),this.toggle()})}_getConfig(t){return t={...this.constructor.Default,...A.getDataAttributes(this._element),...t},a("dropdown",t,this.constructor.DefaultType),t}_getMenuElement(){return P.next(this._element,".dropdown-menu")[0]}_getPlacement(){const t=this._element.parentNode;let e="bottom-start";return t.classList.contains("dropup")?(e="top-start",this._menu.classList.contains("dropdown-menu-right")&&(e="top-end")):t.classList.contains("dropright")?e="right-start":t.classList.contains("dropleft")?e="left-start":this._menu.classList.contains("dropdown-menu-right")&&(e="bottom-end"),e}_detectNavbar(){return Boolean(this._element.closest(".navbar"))}_getOffset(){const t={};return"function"==typeof this._config.offset?t.fn=t=>(t.offsets={...t.offsets,...this._config.offset(t.offsets,this._element)||{}},t):t.offset=this._config.offset,t}static dropdownInterface(t,e){let i=h.getData(t,"bs.dropdown");if(i||(i=new F(t,"object"==typeof e?e:null)),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each((function(){F.dropdownInterface(this,t)}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=P.find('[data-toggle="dropdown"]');for(let i=0,o=e.length;i<o;i++){const o=F.getParentFromElement(e[i]),s=h.getData(e[i],"bs.dropdown"),n={relatedTarget:e[i]};if(t&&"click"===t.type&&(n.clickEvent=t),!s)continue;const a=s._menu;if(!e[i].classList.contains("show"))continue;if(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&"Tab"===t.key)&&a.contains(t.target))continue;_.trigger(o,"hide.bs.dropdown",n).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(t=>_.off(t,"mouseover",null,(function(){}))),e[i].setAttribute("aria-expanded","false"),a.classList.remove("show"),e[i].classList.remove("show"),_.trigger(o,"hidden.bs.dropdown",n))}}static getParentFromElement(t){return i(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?"Space"===t.key||"Escape"!==t.key&&("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.target.closest(".dropdown-menu")):!R.test(t.key))return;if(t.preventDefault(),t.stopPropagation(),this.disabled||this.classList.contains("disabled"))return;const e=F.getParentFromElement(this),i=this.classList.contains("show");if("Escape"===t.key){return(this.matches('[data-toggle="dropdown"]')?this:P.prev(this,'[data-toggle="dropdown"]')[0]).focus(),void F.clearMenus()}if(!i||"Space"===t.key)return void F.clearMenus();const o=P.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",e).filter(r);if(!o.length)return;let s=o.indexOf(t.target);"ArrowUp"===t.key&&s>0&&s--,"ArrowDown"===t.key&&s<o.length-1&&s++,s=-1===s?0:s,o[s].focus()}static getInstance(t){return h.getData(t,"bs.dropdown")}}_.on(document,"keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',F.dataApiKeydownHandler),_.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",F.dataApiKeydownHandler),_.on(document,"click.bs.dropdown.data-api",F.clearMenus),_.on(document,"keyup.bs.dropdown.data-api",F.clearMenus),_.on(document,"click.bs.dropdown.data-api",'[data-toggle="dropdown"]',(function(t){t.preventDefault(),t.stopPropagation(),F.dropdownInterface(this,"toggle")})),_.on(document,"click.bs.dropdown.data-api",".dropdown form",t=>t.stopPropagation());class j{defaultOptions={sourceAttr:"href",overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1};transitionPrefix;transitionCapable=!1;isTouchDevice="ontouchstart"in window;initialLocationHash;pushStateSupport="pushState"in history;isOpen=!1;isAnimating=!1;isClosing=!1;urlChangedOnce=!1;hashReseted=!1;historyHasChanges=!1;historyUpdateTimeout=null;currentImage;eventNamespace="simplelightbox";domNodes={};loadedImages=[];initialImageIndex=0;currentImageIndex=0;initialSelector=null;globalScrollbarWidth=0;controlCoordinates={swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0};constructor(t,e){this.options=Object.assign(this.defaultOptions,e),"string"==typeof t?(this.initialSelector=t,this.elements=Array.from(document.querySelectorAll(t))):this.elements=void 0!==t.length&&t.length>0?Array.from(t):[t],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=!1!==this.transitionPrefix,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,t=>{if(this.isValidLink(t.currentTarget)){if(t.preventDefault(),this.isAnimating)return!1;this.initialImageIndex=this.elements.indexOf(t.currentTarget),this.openImage(t.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.overlay,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],t=>{this.isOpen&&this.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,t=>{t.target.classList.contains("sl-overlay")&&t.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(t=>{if(this.controlCoordinates.swipeDiff=0,this.isAnimating&&"Escape"===t.key)return this.currentImage.setAttribute("src",""),this.isAnimating=!1,this.close();this.isOpen&&(t.preventDefault(),"Escape"===t.key&&this.close(),!this.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(t.key)>-1&&this.loadImage("ArrowRight"===t.key?1:-1))},this.options.throttleInterval)),this.addEvents()}createDomNodes(){this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=".7",this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML=`<button class="sl-prev">${this.options.navText[0]}</button><button class="sl-next">${this.options.navText[1]}</button>`,this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass&&this.domNodes.caption.classList.add(this.options.captionClass),this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}throttle(t,e){let i;return function(){i||(t.apply(this,arguments),i=!0,setTimeout((function(){return i=!1}),e))}}isValidLink(t){return!this.options.fileExt||"pathname"in t&&new RegExp("("+this.options.fileExt+")$","i").test(t.pathname)}calculateTransitionPrefix(){let t=(document.body||document.documentElement).style;return"transition"in t?"":"WebkitTransition"in t?"-webkit-":"MozTransition"in t?"-moz-":"OTransition"in t&&"-o"}toggleScrollbar(t){let e=0;if("hide"===t){let t=window.innerWidth;if(!t){let e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}if(document.body.clientWidth<t){let t=document.createElement("div"),i=parseInt(document.body.style.paddingRight||0,10);t.classList.add("sl-scrollbar-measure"),document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,document.body.removeChild(t),document.body.dataset.originalPaddingRight=i,e>0&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=i+e+"px")}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight;return e}close(){if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;let t=this.relatedElements[this.currentImageIndex];t.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.fadeOut(document.querySelectorAll(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),300,()=>{this.options.disableScroll&&this.toggleScrollbar("show"),this.options.htmlClass&&""!==this.options.htmlClass&&document.querySelector("html").classList.remove(this.options.htmlClass),document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay),this.domNodes.additionalHtml=null,t.dispatchEvent(new Event("closed.simplelightbox")),this.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(let t in this.controlCoordinates)this.controlCoordinates[t]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}get hash(){return window.location.hash.substring(1)}preload(){let t=this.currentImageIndex,e=this.relatedElements.length,i=t+1<0?e-1:t+1>=e-1?0:t+1,o=t-1<0?e-1:t-1>=e-1?0:t-1,s=new Image,n=new Image;s.addEventListener("load",e=>{let i=e.target.getAttribute("src");-1===this.loadedImages.indexOf(i)&&this.loadedImages.push(i),this.relatedElements[t].dispatchEvent(new Event("nextImageLoaded."+this.eventNamespace))}),s.setAttribute("src",this.relatedElements[i].getAttribute(this.options.sourceAttr)),n.addEventListener("load",e=>{let i=e.target.getAttribute("src");-1===this.loadedImages.indexOf(i)&&this.loadedImages.push(i),this.relatedElements[t].dispatchEvent(new Event("prevImageLoaded."+this.eventNamespace))}),n.setAttribute("src",this.relatedElements[o].getAttribute(this.options.sourceAttr))}loadImage(t){let e=t;this.options.rtl&&(t=-t),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((1===t?"next":"prev")+"."+this.eventNamespace));let i=this.currentImageIndex+t;if(this.isAnimating||(i<0||i>=this.relatedElements.length)&&!1===this.options.loop)return!1;this.currentImageIndex=i<0?this.relatedElements.length-1:i>this.relatedElements.length-1?0:i,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*e-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,300,()=>{this.isAnimating=!0,setTimeout(()=>{let t=this.relatedElements[this.currentImageIndex];this.currentImage.setAttribute("src",t.getAttribute(this.options.sourceAttr)),-1===this.loadedImages.indexOf(t.getAttribute(this.options.sourceAttr))&&this.show(this.domNodes.spinner),this.domNodes.image.contains(this.domNodes.caption)&&this.domNodes.image.removeChild(this.domNodes.caption),this.adjustImage(e),this.options.preloading&&this.preload()},100)})}adjustImage(t){if(!this.currentImage)return!1;let e=new Image,i=window.innerWidth*this.options.widthRatio,o=window.innerHeight*this.options.heightRatio;e.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),e.addEventListener("error",e=>{this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("error."+this.eventNamespace)),this.isAnimating=!1,this.isOpen=!1,this.domNodes.spinner.style.display="none";let i=1===t||-1===t;if(this.initialImageIndex===this.currentImageIndex&&i)return this.close();this.options.alertError&&alert(this.options.alertErrorMessage),this.loadImage(i?t:1)}),e.addEventListener("load",e=>{void 0!==t&&(this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("changed."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((1===t?"nextDone":"prevDone")+"."+this.eventNamespace))),this.options.history&&this.updateURL(),-1===this.loadedImages.indexOf(this.currentImage.getAttribute("src"))&&this.loadedImages.push(this.currentImage.getAttribute("src"));let s=e.target.width,n=e.target.height;if(this.options.scaleImageToRatio||s>i||n>o){let t=s/n>i/o?s/i:n/o;s/=t,n/=t}this.domNodes.image.style.top=(window.innerHeight-n)/2+"px",this.domNodes.image.style.left=(window.innerWidth-s-this.globalScrollbarWidth)/2+"px",this.domNodes.image.style.width=s+"px",this.domNodes.image.style.height=n+"px",this.domNodes.spinner.style.display="none",this.fadeIn(this.currentImage,300),this.isOpen=!0;let a,r="self"===this.options.captionSelector?this.relatedElements[this.currentImageIndex]:this.relatedElements[this.currentImageIndex].querySelector(this.options.captionSelector);this.options.captions&&r&&(a="data"===this.options.captionType?r.dataset[this.options.captionsData]:"text"===this.options.captionType?r.innerHTML:r.getAttribute(this.options.captionsData)),this.options.loop||(0===this.currentImageIndex&&this.hide(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex>=this.relatedElements.length-1&&this.hide(this.domNodes.navigation.querySelector(".sl-next")),this.currentImageIndex>0&&this.show(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex<this.relatedElements.length-1&&this.show(this.domNodes.navigation.querySelector(".sl-next"))),1===this.relatedElements.length?this.hide(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):this.show(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")),1===t||-1===t?(this.options.animationSlide&&(this.slide(0,100*t+"px"),setTimeout(()=>{this.slide(this.options.animationSpeed/1e3,"0px")},50)),this.fadeIn(this.domNodes.image,300,()=>{this.isAnimating=!1,this.setCaption(a,s)})):(this.isAnimating=!1,this.setCaption(a,s)),this.options.additionalHtml&&!this.domNodes.additionalHtml&&(this.domNodes.additionalHtml=document.createElement("div"),this.domNodes.additionalHtml.classList.add("sl-additional-html"),this.domNodes.additionalHtml.innerHTML=this.options.additionalHtml,this.domNodes.image.appendChild(this.domNodes.additionalHtml))})}zoomPanElement(t,e,i){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+t+","+e+") scale("+i+")"}minMax(t,e,i){return t<e?e:t>i?i:t}setZoomData(t,e,i){this.currentImage.dataset.scale=t,this.currentImage.dataset.translateX=e,this.currentImage.dataset.translateY=i}hashchangeHandler(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}addEvents(){this.addEventListener(window,"resize."+this.eventNamespace,t=>{this.isOpen&&this.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(()=>{this.addEventListener(window,"hashchange."+this.eventNamespace,t=>{this.isOpen&&this.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,t=>{if(!t.currentTarget.tagName.match(/button/i))return!0;t.preventDefault(),this.controlCoordinates.swipeDiff=0,this.loadImage(t.currentTarget.classList.contains("sl-next")?1:-1)}),this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],t=>{if("A"===t.target.tagName&&"touchstart"===t.type)return!0;if("mousedown"===t.type)this.controlCoordinates.initialPointerOffsetX=t.clientX,this.controlCoordinates.initialPointerOffsetY=t.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.capture=!0;else{if(this.controlCoordinates.touchCount=t.touches.length,this.controlCoordinates.initialPointerOffsetX=t.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=t.touches[0].clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,1===this.controlCoordinates.touchCount){if(this.controlCoordinates.doubleTapped)return this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement("0px","0px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement("0px","0px",this.controlCoordinates.initialScale),this.domNodes.caption.style.opacity||"none"===this.domNodes.caption.style.display||this.fadeOut(this.domNodes.caption,200),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&this.currentImage.classList.remove("sl-transition")},200),!1;this.controlCoordinates.doubleTapped=!0,setTimeout(()=>{this.controlCoordinates.doubleTapped=!1},300),this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY)}else 2===this.controlCoordinates.touchCount&&(this.controlCoordinates.initialPointerOffsetX2=t.touches[1].clientX,this.controlCoordinates.initialPointerOffsetY2=t.touches[1].clientY,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.pinchOffsetX=(this.controlCoordinates.initialPointerOffsetX+this.controlCoordinates.initialPointerOffsetX2)/2,this.controlCoordinates.pinchOffsetY=(this.controlCoordinates.initialPointerOffsetY+this.controlCoordinates.initialPointerOffsetY2)/2,this.controlCoordinates.initialPinchDistance=Math.sqrt((this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)*(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)+(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)*(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)));this.controlCoordinates.capture=!0}return!!this.controlCoordinates.mousedown||(this.transitionCapable&&(this.controlCoordinates.imageLeft=parseInt(this.domNodes.image.style.left,10)),this.controlCoordinates.mousedown=!0,this.controlCoordinates.swipeDiff=0,this.controlCoordinates.swipeYDiff=0,this.controlCoordinates.swipeStart=t.pageX||t.touches[0].pageX,this.controlCoordinates.swipeYStart=t.pageY||t.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],t=>{if(!this.controlCoordinates.mousedown)return!0;if(t.preventDefault(),"touchmove"===t.type){if(!1===this.controlCoordinates.capture)return!1;this.controlCoordinates.pointerOffsetX=t.touches[0].clientX,this.controlCoordinates.pointerOffsetY=t.touches[0].clientY,this.controlCoordinates.touchCount=t.touches.length,this.controlCoordinates.touchmoveCount++,this.controlCoordinates.touchCount>1?(this.controlCoordinates.pointerOffsetX2=t.touches[1].clientX,this.controlCoordinates.pointerOffsetY2=t.touches[1].clientY,this.controlCoordinates.targetPinchDistance=Math.sqrt((this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)*(this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)+(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)*(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)),null===this.controlCoordinates.initialPinchDistance&&(this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance),Math.abs(this.controlCoordinates.initialPinchDistance-this.controlCoordinates.targetPinchDistance)>=1&&(this.controlCoordinates.targetScale=this.minMax(this.controlCoordinates.targetPinchDistance/this.controlCoordinates.initialPinchDistance*this.controlCoordinates.initialScale,1,this.options.maxZoom),this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,-1*this.controlCoordinates.limitOffsetX,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,-1*this.controlCoordinates.limitOffsetY,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1&&(this.controlCoordinates.zoomed=!0,this.domNodes.caption.style.opacity||"none"===this.domNodes.caption.style.display||this.fadeOut(this.domNodes.caption,200)),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY)):(this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),-1*this.controlCoordinates.limitOffsetX,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),-1*this.controlCoordinates.limitOffsetY,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale))}if("mousemove"===t.type&&this.controlCoordinates.mousedown){if("touchmove"==t.type)return!0;if(!1===this.controlCoordinates.capture)return!1;this.controlCoordinates.pointerOffsetX=t.clientX,this.controlCoordinates.pointerOffsetY=t.clientY,this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),-1*this.controlCoordinates.limitOffsetX,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),-1*this.controlCoordinates.limitOffsetY,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)}this.controlCoordinates.zoomed||(this.controlCoordinates.swipeEnd=t.pageX||t.touches[0].pageX,this.controlCoordinates.swipeYEnd=t.pageY||t.touches[0].pageY,this.controlCoordinates.swipeDiff=this.controlCoordinates.swipeStart-this.controlCoordinates.swipeEnd,this.controlCoordinates.swipeYDiff=this.controlCoordinates.swipeYStart-this.controlCoordinates.swipeYEnd,this.options.animationSlide&&this.slide(0,-this.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],t=>{if(this.isTouchDevice&&"touchend"===t.type&&(this.controlCoordinates.touchCount=t.touches.length,0===this.controlCoordinates.touchCount?(this.currentImage&&this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),1===this.controlCoordinates.initialScale&&(this.controlCoordinates.zoomed=!1,"none"===this.domNodes.caption.style.display&&this.fadeIn(this.domNodes.caption,200)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1):1===this.controlCoordinates.touchCount?(this.controlCoordinates.initialPointerOffsetX=t.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=t.touches[0].clientY):this.controlCoordinates.touchCount>1&&(this.controlCoordinates.initialPinchDistance=null)),this.controlCoordinates.mousedown){this.controlCoordinates.mousedown=!1;let t=!0;this.options.loop||(0===this.currentImageIndex&&this.controlCoordinates.swipeDiff<0&&(t=!1),this.currentImageIndex>=this.relatedElements.length-1&&this.controlCoordinates.swipeDiff>0&&(t=!1)),Math.abs(this.controlCoordinates.swipeDiff)>this.options.swipeTolerance&&t?this.loadImage(this.controlCoordinates.swipeDiff>0?1:-1):this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,"0px"),this.options.swipeClose&&Math.abs(this.controlCoordinates.swipeYDiff)>50&&Math.abs(this.controlCoordinates.swipeDiff)<this.options.swipeTolerance&&this.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],t=>{if(!this.isTouchDevice)return this.controlCoordinates.initialPointerOffsetX=t.clientX,this.controlCoordinates.initialPointerOffsetY=t.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement("0px","0px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1,"none"===this.domNodes.caption.style.display&&this.fadeIn(this.domNodes.caption,200)):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement("0px","0px",this.controlCoordinates.initialScale),this.domNodes.caption.style.opacity||"none"===this.domNodes.caption.style.display||this.fadeOut(this.domNodes.caption,200),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&this.currentImage.classList.remove("sl-transition")},200),this.controlCoordinates.capture=!0,!1})}getDimensions(t){let e=window.getComputedStyle(t),i=t.offsetHeight,o=t.offsetWidth,s=parseFloat(e.borderTopWidth);return{height:i-parseFloat(e.borderBottomWidth)-s-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom),width:o-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)}}updateHash(){let t="pid="+(this.currentImageIndex+1),e=window.location.href.split("#")[0]+"#"+t;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,e):this.historyHasChanges?window.location.replace(e):window.location.hash=t,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}resetHash(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}updateURL(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}setCaption(t,e){this.options.captions&&t&&""!==t&&void 0!==t&&(this.hide(this.domNodes.caption),this.domNodes.caption.style.width=e+"px",this.domNodes.caption.innerHTML=t,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(()=>{this.fadeIn(this.domNodes.caption,300)},this.options.captionDelay))}slide(t,e){if(!this.transitionCapable)return this.domNodes.image.style.left=e;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+e+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+t+"s linear"}getRelated(t){let e;return e=t&&!1!==t&&"nofollow"!==t?Array.from(this.elements).filter(e=>e.getAttribute("rel")===t):this.elements,e}openImage(t){t.dispatchEvent(new Event("show."+this.eventNamespace)),this.options.disableScroll&&(this.globalScrollbarWidth=this.toggleScrollbar("hide")),this.options.htmlClass&&""!==this.options.htmlClass&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(t.rel),this.options.showCounter&&(1==this.relatedElements.length&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(t);let e=t.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",e),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,-1===this.loadedImages.indexOf(e)&&this.loadedImages.push(e),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,300),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton],300),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(()=>{t.dispatchEvent(new Event("shown."+this.eventNamespace))},this.options.animationSpeed)}addEventListener(t,e,i,o){t=this.wrap(t),e=this.wrap(e);for(let s of t){s.namespaces||(s.namespaces={});for(let t of e){let e=o||!1;s.namespaces[t]=i,s.addEventListener(t.split(".")[0],i,e)}}}removeEventListener(t,e){t=this.wrap(t),e=this.wrap(e);for(let i of t)for(let t of e)i.removeEventListener(t.split(".")[0],i.namespaces[t]),delete i.namespaces[t]}fadeOut(t,e,i){t=this.wrap(t);for(let e of t)e.style.opacity=1;let o=16.66666/(e||300),s=()=>{let e=parseFloat(t[0].style.opacity);if((e-=o)<0){for(let e of t)e.style.display="none",e.style.opacity="";i&&i.call(this,t)}else{for(let i of t)i.style.opacity=e;requestAnimationFrame(s)}};s()}fadeIn(t,e,i,o){t=this.wrap(t);for(let e of t)e.style.opacity=0,e.style.display=o||"block";let s=parseFloat(t[0].dataset.opacityTarget||1),n=16.66666*s/(e||300),a=()=>{let e=parseFloat(t[0].style.opacity);if((e+=n)>s){for(let e of t)e.style.opacity="";i&&i.call(this,t)}else{for(let i of t)i.style.opacity=e;requestAnimationFrame(a)}};a()}hide(t){t=this.wrap(t);for(let e of t)e.dataset.initialDisplay=e.style.display,e.style.display="none"}show(t,e){t=this.wrap(t);for(let i of t)i.style.display=i.dataset.initialDisplay||e||"block"}wrap(t){return"function"==typeof t[Symbol.iterator]&&"string"!=typeof t?t:[t]}on(t,e){t=this.wrap(t);for(let i of this.elements){i.fullyNamespacedEvents||(i.fullyNamespacedEvents={});for(let o of t)i.fullyNamespacedEvents[o]=e,i.addEventListener(o,e)}return this}off(t){t=this.wrap(t);for(let e of this.elements)for(let i of t)void 0!==e.fullyNamespacedEvents&&i in e.fullyNamespacedEvents&&e.removeEventListener(i,e.fullyNamespacedEvents[i]);return this}open(t){t=t||this.elements[0],"undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t.get(0)),this.initialImageIndex=this.elements.indexOf(t),this.initialImageIndex>-1&&this.openImage(t)}next(){this.loadImage(1)}prev(){this.loadImage(-1)}destroy(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}refresh(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";let t=this.options,e=this.initialSelector;return this.destroy(),this.constructor(e,t),this}}const B=function(t,e){return new j(t,e)};B(".picture-partial__zoom-link",{captionSelector:"self",captionType:"data",captionsData:"caption"}),B(".image-partial__zoom-link",{captionSelector:"self",captionType:"data",captionsData:"caption"})}();
